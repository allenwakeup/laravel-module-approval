(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{D3IF:function(t,e,a){"use strict";a.r(e);a("oVuX"),a("zKZe"),a("TeQF");var n={components:{},props:{},data:function(){return{params:{page:1,per_page:30},total:0,selectedRowKeys:[],columns:[{title:"#",dataIndex:"id",fixed:"left"},{title:"上级分类",scopedSlots:{customRender:"pid"}},{title:"编码",dataIndex:"code"},{title:"名称",scopedSlots:{customRender:"name"}},{title:"简称",dataIndex:"short"},{title:"别名",dataIndex:"alias"},{title:"描述",dataIndex:"description"},{title:"排序",dataIndex:"order"},{title:"类型",scopedSlots:{customRender:"type"}},{title:"状态",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"created_at"},{title:"更新时间",dataIndex:"updated_at"},{title:"操作",fixed:"right",scopedSlots:{customRender:"action"}}],list:[],dictionary:{status:{enabled:"启用",disabled:"禁用"}},loading_status:{},breadcrumb:[]}},watch:{},computed:{},methods:{onSelectChange:function(t){this.selectedRowKeys=t},onChange:function(t){this.params.page=t},del:function(){var t=this;if(0===this.selectedRowKeys.length)return this.$message.error("未选择数据.");this.$confirm({title:"你确定要删除选择的数据？",content:"确定删除后无法恢复.",okText:"是",okType:"danger",cancelText:"取消",onOk:function(){var e=t.selectedRowKeys.join(",");t.$delete(t.$api.moduleApprovalCategories+"/"+e).then((function(e){200===e.code?(t.onload(),t.$message.success("删除成功")):t.$message.error(e.msg)}))}})},onStatusChange:function(t){var e=this,a=[1,0][t.status];this.loading_status["_"+t.id]=!0,this.$put(this.$api.moduleApprovalCategories+"/"+t.id,Object.assign({},t,{status:a})).then((function(n){if(e.loading_status["_"+t.id]=!1,200!==n.code)return e.$message.error(n.msg);t.status=a,e.$message.success(n.msg)})).catch((function(){return e.loading_status["_"+t.id]=!1}))},onClickName:function(t){t.path?(t.path.length>0?this.breadcrumb=t.path.reduce((function(e,a){return e.push({id:t.path[e.length],name:t.path_text[e.length],order:e.length}),e}),[]):0===this.breadcrumb.filter((function(e){return e.id===t.id})).length&&this.breadcrumb.push(t),this.params={page:1,per_page:30}):this.breadcrumb=this.breadcrumb.filter((function(e){return e.order<=t.order})),this.getList(t.id)},getList:function(t){var e=this;t||(this.breadcrumb=[]);var a=t?Object.assign({},this.params,{pid:t}):this.params;this.$get(this.$api.moduleApprovalCategories,a).then((function(t){e.total=t.data.total,e.list=t.data.data}))},onload:function(){this.getList()}},created:function(){this.onload()},mounted:function(){}},s=a("KHd+"),i=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"admin_table_page_title"},[a("a-breadcrumb",[a("a-breadcrumb-item",[t.breadcrumb.length>0?a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.getList()}}},[a("a-icon",{attrs:{type:"home"}}),t._v("分类列表")],1):a("span",[t._v("分类列表")])],1),t._v(" "),t._l(t.breadcrumb,(function(e){return a("a-breadcrumb-item",{key:e.id},[a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.onClickName(e)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])],1)}))],2)],1),t._v(" "),a("div",{staticClass:"unline underm"}),t._v(" "),a("div",{staticClass:"admin_table_handle_btn"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$router.push("/Admin/goodcatch/m/approval/categories/form")}}},[t._v("添加")]),t._v(" "),a("a-button",{staticClass:"admin_delete_btn",attrs:{type:"danger",icon:"delete"},on:{click:t.del}},[t._v("批量删除")])],1),t._v(" "),a("div",{staticClass:"admin_table_list"},[a("a-table",{attrs:{columns:t.columns,"data-source":t.list,pagination:!1,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},"row-key":"id"},scopedSlots:t._u([{key:"pid",fn:function(e){return a("span",{},[t._v("\n                "+t._s(e.path_text?e.path_text.join(" / "):"--")+"\n            ")])}},{key:"name",fn:function(e){return a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.onClickName(e)}}},[t._v("\n                "+t._s(e.name)+"\n            ")])}},{key:"type",fn:function(e){return a("span",{},[t._v("\n                "+t._s(0===e.type?"默认":"其他")+"\n            ")])}},{key:"status",fn:function(e){return a("a-switch",{attrs:{loading:t.loading_status["_"+e.id],"checked-children":t.dictionary.status.enabled,"un-checked-children":t.dictionary.status.disabled,"default-checked":1===e.status},on:{change:function(a){return t.onStatusChange(e)}}})}},{key:"action",fn:function(e){return a("span",{},[a("a-button",{attrs:{icon:"edit"},on:{click:function(a){return t.$router.push("/Admin/goodcatch/m/approval/categories/form/"+e.id)}}},[t._v("编辑")])],1)}}])}),t._v(" "),t.total>0?a("div",{staticClass:"admin_pagination"},[a("a-pagination",{attrs:{"page-size":t.params.per_page,total:t.total,"show-less-items":""},on:{"update:pageSize":function(e){return t.$set(t.params,"per_page",e)},"update:page-size":function(e){return t.$set(t.params,"per_page",e)},change:t.onChange},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}})],1):t._e()],1)])}),[],!1,null,"128119a4",null);e.default=i.exports}}]);